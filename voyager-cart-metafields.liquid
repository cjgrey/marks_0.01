<script id="skup-voyager" data-item="cart" type="application/json">{% assign count = shop.metafields.voyager.size %}{"upsells":[{% for i in (1..count) %}{% assign key = 'upsell_' | append: i %}{% if shop.metafields.voyager[key] %}{% for upsell in shop.metafields.voyager[key] %}{{ upsell | json}}{% if forloop.last == true %}{% else %},{% endif %}{% endfor %}{% endif %}{% endfor %}],"products":[{% for item in cart.items %}{"product_id":{{ item.product_id }}, "variant_id": {{ item.variant_id }},"collections":[{% for collection in item.product.collections %}{"id" : {{ collection.id }},"handle":"{{ collection.handle }}"}{% if forloop.last == true %}{% else %},{% endif %}{% endfor %}]}{% if forloop.last == true %}{% else %},{% endif %}{% endfor %}]}</script>